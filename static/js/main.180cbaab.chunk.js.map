{"version":3,"sources":["features/map/Map.module.css","features/map/street-view (2).png","store/store.tsx","features/map/Map-Utils.ts","features/map/destination (1).png","features/map/Map.tsx","features/WelcomeMessage/index.jsx","features/Scanner/Scanner.jsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["module","exports","useExploreStore","create","set","get","mapPos","lat","lng","setMapPosition","pos","console","log","currentLevelIndex","currentLevelMessages","GameConfig","levels","messages","remainingMessageCount","length","updateGameState","scannedMessages","newLevel","setCurrentLevelIndex","isMapEnabled","isScannerEnabled","level","setIsMapEnabled","isEnabled","setIsScannerEnabled","addScannedMessage","message","push","remainingCount","earthRadius","degreesToRadians","degrees","Math","PI","arePositionsWithinDistance","pos1","pos2","dis","distance","lat1","lng1","lat2","lng2","dLat","dLng","a","sin","cos","c","atan2","sqrt","calculateHaversineDistance","containerStyle","width","height","messageStyle","position","top","left","transform","bgcolor","border","boxShadow","p","getPixelPositionOffset","x","y","Map","isLoaded","useJsApiLoader","id","googleMapsApiKey","locationLoaded","setLocationLoaded","useState","state","currentLevel","setCurrentLevel","isModalOpen","setIsModalOpen","useEffect","watchPositionId","navigator","geolocation","watchPosition","async","newPos","coords","latitude","longitude","marker","enableHighAccuracy","maximumAge","clearWatch","_jsx","style","children","_jsxs","GoogleMap","mapContainerStyle","center","zoom","options","disableDefaultUI","mapId","MarkerF","icon","url","landmarkIcon","labelOrigin","google","maps","Point","label","text","address","color","onClick","userIcon","OverlayView","mapPaneName","OVERLAY_MOUSE_TARGET","Box","sx","Typography","variant","component","modalTitle","mt","mb","modalDescription","Button","WelcomeMessage","showButton","setShowButton","React","TxtRotate","el","toRotate","period","this","loopNum","txt","tick","isDeleting","prototype","i","fullTxt","substring","innerHTML","that","delta","setTimeout","window","onload","elements","document","getElementsByClassName","getAttribute","JSON","parse","css","createElement","type","body","appendChild","className","class","Scanner","props","data","setData","QrReader","onResult","result","error","includes","info","constraints","facingMode","onScan","onError","App","reportWebVitals","onPerfEntry","Function","then","_ref","getCLS","getFID","getFCP","getLCP","getTTFB","container","getElementById","ReactDOM","render"],"mappings":"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","file":"static/js/main.180cbaab.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"map-container\":\"Map_map-container__2ZC0h\",\"map-div\":\"Map_map-div__2IdK6\",\"info-box\":\"Map_info-box__28Iw8\",\"overlay\":\"Map_overlay__pXAeS\",\"modal\":\"Map_modal__2EFkX\",\"close-btn\":\"Map_close-btn__3PU26\"};","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAMAAAC7IEhfAAAA+VBMVEVHcEz50WVJZ65JZ65HZq6cmI9JZ696hJ1JaLBJZ65JZ6750mb71mT712NJZ65JZ65JZ6750mb50mb50mb602ZJZ65JZ65JZ65KaLBJZ65JZ65IZ6750mb50mb50mb50mZNbbRJZ6750mb50mb50mb50mbawHL50ma6q4D50mZVeb350mb50mabmYz50mb702V3g5tJZ6750mZRdLpJZq5KaK9Ver5ObrT61WfSPTNYfcFVeb3WSjbytVzvp1bkhEvea0NXb6j3y2Ppl1FcY59VZqajTF5FaLLHQD3gdEZ6WIKuSFOTUWzJe1v0vl+rcmxNZqsA0DpHcEwM4ksFAAAAU3RSTlMA/kPjKwIhBly57AkQFueo025J9NiBcPny2hQZMrCk0IoeIJ3oW/fI+r75uIpRl9B6////////////////////////////////////////////AOLyVYEAAAFTSURBVDjLzdRZc4IwEABgQSkooFwe9a5H1d67iEKLR72PXv//1zTgTPuCiTPtg/uQycM3m91kJ7HYGYWQkKSrU1wuDaDxbMingIRWYsJs4CDP/x/kC+HR7HbEbB4gLTFdop4kKdPJXJFxhxo4YZFOhirFDPxEjgZLl+CEGcmaESjwIu4MhgG0bUiKdPgcwL49OBW+nC0sar+Qej2CFCfQIfCGMbviRd0Be9gvSMzJlQAGdj+ViJ0tFNSnA7xXaExtV62uE8DX68cHQz6Wzehw6HbhAF00K+Vo2DYRufFnCJfvI0S0IqVaQ3Tn/v5rvViuFxt/5CI2o56x0SI5Jt7mbbdf7VaeNybwNmowxCqBH1PfC8OfzEghemSNjQqHOBtPttPpdj4ie/PuSN+K3jHRdZHjgrVVMY5PpGLo1V7Nsmq9pl6W6U8jyIqqKvJJf/PfvvZvlPFDcH9CqxsAAAAASUVORK5CYII=\"","import { create } from \"zustand\";\nimport GameConfig from \"../game-config.json\";\n\nexport type Position = {\n  lat: number;\n  lng: number;\n};\n\ntype ExploreStoreState = {\n  mapPos: Position;\n  currentLevelIndex: number;\n  isMapEnabled: boolean;\n  currentLevelMessages: string[];\n  scannedMessages: string[];\n  isScannerEnabled: boolean;\n  remainingMessageCount: number;\n};\n\ntype ExploreStoreActions = {\n  setMapPosition: (pos: Position) => void;\n  setCurrentLevelIndex: (level: number) => void;\n  setIsMapEnabled: (isEnabled: boolean) => void;\n  updateGameState: () => void;\n  setIsScannerEnabled: (isEnabled: boolean) => void;\n  addScannedMessage: (message: string) => void;\n};\n\nexport const useExploreStore = create<ExploreStoreActions & ExploreStoreState>(\n  (set, get) => ({\n    mapPos: { lat: 35.30489293472487, lng: -120.66246462042335 },\n    setMapPosition: (pos: Position) => {\n      set({ mapPos: pos });\n      console.log(\"updating map pos\");\n    },\n    currentLevelIndex: 0,\n    currentLevelMessages: GameConfig.levels[0].messages,\n    remainingMessageCount: GameConfig.levels[0].messages.length,\n    updateGameState: () => {\n      if (get().currentLevelMessages.length !== get().scannedMessages.length) {\n        return;\n      }\n      console.log(\"incrementing game level\");\n      const newLevel = get().currentLevelIndex + 1;\n      get().setCurrentLevelIndex(newLevel);\n      set({ isMapEnabled: true, isScannerEnabled: false });\n\n      // set({\n      //   currentLevel: newLevel,\n      //   currentLevelMessages: GameConfig.levels[newLevel].messages,\n      //   isMapEnabled: true,\n      //   isScannerEnabled: false,\n      // });\n    },\n    setCurrentLevelIndex: (level: number) => {\n      set({\n        currentLevelIndex: level,\n        currentLevelMessages: GameConfig.levels[level].messages,\n        scannedMessages: [],\n        remainingMessageCount: GameConfig.levels[level].messages.length,\n      });\n    },\n    isMapEnabled: false,\n    setIsMapEnabled: (isEnabled: boolean) => {\n      set({ isMapEnabled: isEnabled });\n    },\n    isScannerEnabled: false,\n    setIsScannerEnabled: (isEnabled: boolean) => {\n      set({ isScannerEnabled: isEnabled });\n    },\n    scannedMessages: [],\n    addScannedMessage: (message: string) => {\n      const messages = get().scannedMessages;\n      messages.push(message);\n      const remainingCount = get().remainingMessageCount - 1;\n      set({ scannedMessages: messages, remainingMessageCount: remainingCount });\n    },\n  })\n);\n","import { Position } from \"../../store/store\";\n// Radius of the Earth in meters\nconst earthRadius = 6371000; // Approximately 6,371 km\n\nfunction degreesToRadians(degrees: number) {\n  return (degrees * Math.PI) / 180;\n}\n\nfunction calculateHaversineDistance(pos1: Position, pos2: Position): number {\n  const { lat: lat1, lng: lng1 } = pos1;\n  const { lat: lat2, lng: lng2 } = pos2;\n\n  const dLat = degreesToRadians(lat2 - lat1);\n  const dLng = degreesToRadians(lng2 - lng1);\n\n  const a =\n    Math.sin(dLat / 2) * Math.sin(dLat / 2) +\n    Math.cos(degreesToRadians(lat1)) *\n      Math.cos(degreesToRadians(lat2)) *\n      Math.sin(dLng / 2) *\n      Math.sin(dLng / 2);\n\n  const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n\n  // Distance in meters\n  const distance = earthRadius * c;\n\n  return distance;\n}\n\nexport function arePositionsWithinDistance(\n  pos1: Position,\n  pos2: Position,\n  dis: number\n): boolean {\n  const distance = calculateHaversineDistance(pos1, pos2);\n  return distance <= dis;\n}\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAMAAAC7IEhfAAABF1BMVEVHcExDIWtBIGlTYqFEImusL3ZAIGlFImxoJm9EIWtCIGlMQIRntudLImxrxPNQO39CIWtAH2n3On9GJm7zOX5CIWs/IGqGKnJBIWpKOX5EIWtpu+xCIGnoN31DHmhGLHNINHpCHmhBH2lkqt1fl81NSYzGM3nYNXtVJG1CH2lCHmjtOH5ZfLdin9RDIWuTpc1msuTfNnxIMHZBHmlbJ29qY5u34PipyedZebVOUZNwa6E+IWphJm5NImuDi7mcs9deToxYQYN9gLCgutykwuHONHp3daiu0u6LlsFsOoD6On9ty/n9On//O4C86v+/7f9syfdchr+mL3Z7KXFVaadRWpq/MnibLXRyKHC0MHdYdLCXLXRekMeQv4K2AAAASXRSTlMAF6b+Bv6P0/0LS/3+6f79vGH+3/4edf4x+8n+r/496/SeWf79/f7+8iOF/v39Evz+/v1r/vz+/f78/Jj8/vz9/P38/f3+/P380Eo8MAAAAexJREFUOMvtlNeSokAUhiXZKEkxMKComMeIjnly3K1ukDauyrz/cyw6d46we721p6rDxVfnnP77rxMK/dtBd4jOX2CpmywAmhGN/IGLAvbXtrpX6mQqmBNc3bJtG9Z2MSKoLnBlWFu6e93qseEAMM025WU9Rmrsu10Vrny5SGxpb4UiHSLCrJ7cpX3Ba+FdXp0qEmBvu6QveFXvJdni6Uq6NhOjA0D5q+CxiaU/mEpUbQYc3xCv1yzl1v/zsi5sKiAdvxUYqLNxf3nidzpsMitWqcrWNhHwNwRgIIRyUoYwuQoS3FNch6ewtgF6H1Nqyy+wuWsEmoIID2onkBECjNYpGqDQV5IeVxuoea2RuygkXdTUddks9/feS5QpX1ps8uSFPiPhwoRHfKvSv+tZzL1KtbFY2iSK38AG10aozD09PA5X1cFDdyatM0hs5XPnxkl8IsxzLyPHGT/fz0bO/PV5grFIGWdgrmAi1JbGznw+7w5/eLvzscEYLbTIecYywpnKcDx3PNZbo660QBhT56akG1wJodJUmv18fHt77b48qS0R4UU++k1EQ1143ZepCidJEjdtmQiX1vkLDorcAO7Qzogib5q8d5ifVCGW8xsSCbVCrQ+Tw3pTKYCAcUFfR9NhI5sljUY8R4T+x29PhFFgfz06oAAAAABJRU5ErkJggg==\"","import {\n  GoogleMap,\n  MarkerF,\n  useJsApiLoader,\n  InfoBox,\n  OverlayViewF,\n  OverlayView,\n} from \"@react-google-maps/api\";\nimport React, { useEffect, useMemo, useState } from \"react\";\nimport \"./Map.module.css\";\nimport shadowBox from \"./shadowBox_20x22.png\";\nimport userIcon from \"./street-view (2).png\";\nimport { useExploreStore, Position } from \"../../store/store\";\nimport GameConfig from \"../../game-config.json\";\nimport { Box, Typography, Button } from \"@mui/material\";\nimport { arePositionsWithinDistance } from \"./Map-Utils\";\nimport landmarkIcon from \"./destination (1).png\";\n\nconst containerStyle = {\n  width: \"100%\",\n  height: \"100%\",\n};\n\nconst messageStyle = {\n  position: \"absolute\" as \"absolute\",\n  top: \"50%\",\n  left: \"50%\",\n  transform: \"translate(-50%, -50%)\",\n  bgcolor: \"background.paper\",\n  border: \"2px solid #000\",\n  boxShadow: 24,\n  p: 4,\n  width: \"60vw\",\n};\n\nconst getPixelPositionOffset = (width: number, height: number) => ({\n  x: -(width / 2),\n  y: -(height / 2),\n});\n\nexport function Map() {\n  const { isLoaded } = useJsApiLoader({\n    id: \"google-map-script\",\n    googleMapsApiKey: \"AIzaSyDKqJC4dkD_xkdDVOpI38m3nJr3uuRXq7Q\",\n  });\n\n  const mapOptions = {\n    disableDefaultUI: true,\n    mapId: \"c2191a630a735aa3\",\n  };\n\n  const [locationLoaded, setLocationLoaded] = useState(false);\n  const mapPos = useExploreStore((state) => state.mapPos);\n  const setMapPosition = useExploreStore((state) => state.setMapPosition);\n  const currentLevelIndex = useExploreStore((state) => state.currentLevelIndex);\n  const isMapEnabled = useExploreStore((state) => state.isMapEnabled);\n  const setIsMapEnabled = useExploreStore((state) => state.setIsMapEnabled);\n  const setIsScannerEnabled = useExploreStore(\n    (state) => state.setIsScannerEnabled\n  );\n  const [currentLevel, setCurrentLevel] = useState(GameConfig.levels[0]);\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  // ToDo probably poll this and make there be mutliple hits for truthy\n  useEffect(() => {\n    setCurrentLevel(GameConfig.levels[currentLevelIndex]);\n  }, [currentLevelIndex]);\n  useEffect(() => {\n    const watchPositionId = navigator.geolocation.watchPosition(\n      async (pos) => {\n        const newPos = {\n          lat: pos.coords.latitude,\n          lng: pos.coords.longitude,\n        } as Position;\n        console.log(newPos);\n        if (newPos.lat !== mapPos.lat || newPos.lng !== mapPos.lng) {\n          setMapPosition(newPos);\n          setLocationLoaded(true);\n          if (arePositionsWithinDistance(newPos, currentLevel.marker.pos, 20)) {\n            setIsModalOpen(true);\n          }\n        }\n      },\n      null,\n      { enableHighAccuracy: true, maximumAge: 5000 }\n    );\n    // Cleanup function\n    return () => {\n      // Clear the watchPosition when the component unmounts\n      navigator.geolocation.clearWatch(watchPositionId);\n    };\n  });\n  if (!isMapEnabled || !locationLoaded) return null;\n  return !isLoaded ? (\n    <h1>Loading...</h1>\n  ) : (\n    <div style={{ height: \"100vh\", width: \"100vw\" }}>\n      <GoogleMap\n        mapContainerStyle={containerStyle}\n        center={mapPos}\n        zoom={15}\n        options={mapOptions}>\n        <MarkerF\n          position={currentLevel.marker.pos}\n          icon={{\n            url: landmarkIcon,\n            labelOrigin: new google.maps.Point(10, -10),\n          }}\n          label={{ text: currentLevel.marker.address, color: \"white\" }}\n          onClick={() => {\n            console.log(\"clicked\");\n          }}\n        />\n        <MarkerF\n          position={mapPos}\n          icon={{\n            url: userIcon,\n          }}\n        />\n        {isModalOpen && (\n          <OverlayView\n            mapPaneName={OverlayView.OVERLAY_MOUSE_TARGET}\n            position={mapPos}\n            getPixelPositionOffset={getPixelPositionOffset}>\n            <Box sx={messageStyle}>\n              <Typography id=\"modal-modal-title\" variant=\"h6\" component=\"h2\">\n                {currentLevel.modalTitle}\n              </Typography>\n              <Typography id=\"modal-modal-description\" sx={{ mt: 2, mb: 2 }}>\n                {currentLevel.modalDescription}\n              </Typography>\n              <Button\n                variant={\"outlined\"}\n                onClick={() => {\n                  setIsMapEnabled(false);\n                  setIsScannerEnabled(true);\n                  setIsModalOpen(false);\n                }}>\n                Start Scanning\n              </Button>\n            </Box>\n          </OverlayView>\n        )}\n      </GoogleMap>\n    </div>\n  );\n}\n\n// {\n//   \"levels\": [\n//       {\n//           \"marker\": {\n//               \"address\": \"Architecture Graveyeard\",\n//               \"pos\": { \"lat\": 35.31555195658608, \"lng\": -120.65380604662631 }\n//           },\n//           \"messages\": {\"arch-1\": false, \"arch-2\": false, \"arch-3\": false}\n//       }\n//   ]\n// }\n","import React, { useEffect } from \"react\";\nimport \"./styles.css\";\nimport { changeBackgroundColor } from \"../util/helper\";\nimport { useExploreStore } from \"../../store/store\";\n\nconst WelcomeMessage = () => {\n  const setIsMapEnabled = useExploreStore((state) => state.setIsMapEnabled);\n  const [showButton, setShowButton] = React.useState(false);\n  useEffect(() => {\n    var TxtRotate = function (el, toRotate, period) {\n      this.toRotate = toRotate;\n      this.el = el;\n      this.loopNum = 0;\n      this.period = period;\n      this.txt = \"\";\n      this.tick();\n      this.isDeleting = false;\n    };\n\n    TxtRotate.prototype.tick = function () {\n      var i = this.loopNum % this.toRotate.length;\n      var fullTxt = this.toRotate[i];\n\n      if (this.isDeleting) {\n        this.txt = fullTxt.substring(0, this.txt.length - 1);\n      } else {\n        this.txt = fullTxt.substring(0, this.txt.length + 1);\n      }\n\n      this.el.innerHTML = '<span class=\"wrap\">' + this.txt + \"</span>\";\n\n      var that = this;\n      var delta = 125;\n\n      if (this.isDeleting) {\n        delta /= 2;\n      }\n\n      if (!this.isDeleting && this.txt === fullTxt) {\n        delta = this.period;\n        this.isDeleting = true;\n        if (this.loopNum === this.toRotate.length - 1) {\n          setShowButton(true);\n          setTimeout(() => {\n            return;\n          }, 6000);\n        }\n      } else if (this.isDeleting && this.txt === \"\") {\n        this.isDeleting = false;\n        this.loopNum++;\n        delta = 500;\n      }\n      if (this.loopNum !== 3 || this.txt !== fullTxt) {\n        setTimeout(function () {\n          that.tick();\n        }, delta);\n      }\n    };\n    window.onload = function () {\n      var elements = document.getElementsByClassName(\"txt-rotate\");\n      for (var i = 0; i < elements.length; i++) {\n        var toRotate = elements[i].getAttribute(\"data-rotate\");\n        var period = elements[i].getAttribute(\"data-period\");\n        if (toRotate) {\n          new TxtRotate(elements[i], JSON.parse(toRotate), period);\n        }\n      }\n      // INJECT CSS\n      var css = document.createElement(\"style\");\n      css.type = \"text/css\";\n      css.innerHTML = \".txt-rotate > .wrap { border-right: 0.08em solid #666 }\";\n      document.body.appendChild(css);\n    };\n  }, []);\n  return (\n    <div className=\"welcome-container\">\n      <h1>\n        <span\n          class=\"txt-rotate\"\n          data-period=\"1000\"\n          data-rotate='[\"Welcome to shadow casters\", \"This game will take you on a journey around San Luis Obispo\", \"I hope you enjoy!\"]'></span>\n      </h1>\n      {showButton && (\n        <button onClick={() => setIsMapEnabled(true)} className=\"button-39\">\n          Begin Your Adventure\n        </button>\n      )}\n    </div>\n  );\n};\n\nexport default WelcomeMessage;\n","import React, { useState, useEffect } from \"react\";\nimport { QrReader } from \"react-qr-reader\";\nimport { useExploreStore } from \"../../store/store\";\nimport { Box } from \"@mui/material\";\n\nexport function Scanner(props) {\n  const [data, setData] = useState(\"No result\");\n  const messages = useExploreStore((state) => state.currentLevelMessages);\n  const addScannedMessage = useExploreStore((state) => state.addScannedMessage);\n  const updateGameState = useExploreStore((state) => state.updateGameState);\n  const isScannerEnabled = useExploreStore((state) => state.isScannerEnabled);\n  const remainingMessageCount = useExploreStore(\n    (state) => state.remainingMessageCount\n  );\n  const scannedMessages = useExploreStore((state) => state.scannedMessages);\n  if (!isScannerEnabled) return null;\n  return (\n    <div style={{ width: \"100vw\", height: \"100vh\" }}>\n      <QrReader\n        onResult={(result, error) => {\n          console.log(\"scanned messages\", scannedMessages);\n          if (!!result) {\n            if (result?.text) {\n              console.log(\"result: \", result.text);\n              if (\n                messages.includes(result.text) &&\n                !scannedMessages.includes(result.text)\n              ) {\n                addScannedMessage(result.text);\n                updateGameState();\n              }\n            }\n          }\n          if (!!error) {\n            console.info(error);\n          }\n        }}\n        constraints={{ facingMode: \"environment\" }}\n        onScan={() => {\n          console.log(\"scan\");\n        }}\n        onError={() => {\n          console.log(\"err\");\n        }}\n      />\n\n      <Box\n        sx={{\n          width: \"100vw\",\n          height: \"20vh\",\n          color: \"white\",\n          bgcolor: \"#121212\",\n        }}>\n        Reamining object count: {remainingMessageCount}\n      </Box>\n    </div>\n  );\n}\n","import React, { useEffect } from \"react\";\nimport { Map } from \"./features/map/Map\";\nimport \"./App.css\";\nimport WelcomeMessage from \"./features/WelcomeMessage\";\nimport { useExploreStore } from \"./store/store\";\nimport { Scanner } from \"./features/Scanner/Scanner\";\n\nfunction App() {\n  const isMapEnabled = useExploreStore((state) => state.isMapEnabled);\n  const setIsMapEnabled = useExploreStore((state) => state.setIsMapEnabled);\n  const isScannerEnabled = useExploreStore((state) => state.isScannerEnabled);\n  // useEffect(() => {\n  //   setIsMapEnabled(true);\n  // }, []);\n  return (\n    <div className=\"App\">\n      {!isMapEnabled && !isScannerEnabled && (\n        <div id=\"welcome-message\">\n          <WelcomeMessage />\n        </div>\n      )}\n      <Scanner />\n      <Map />\n    </div>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from \"web-vitals\";\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import(\"web-vitals\").then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\nimport \"./index.css\";\n\nconst container = document.getElementById(\"root\");\nconst root = ReactDOM.render(<App />, container);\n\n// If you want to start measuring performance in your app, pass a function\n\n// to log results (for example: reportWebVitals(console.log))\n\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}